{"record_format_version": 6, "code": "        import json, os, subprocess\n        from spineprep.config import load_config\n        from spineprep.adapters.bids import bold_nii\n        cfg = load_config(CFG_PATH, CFG_SCHEMA)\n        summ = json.loads(Path(input.disc).read_text())\n        assert summ[\"subjects\"], \"No subjects with runs found in BIDS.\"\n        s0 = summ[\"subjects\"][0]\n        sub = s0[\"id\"]\n        ses = s0[\"sessions\"][0][\"id\"]\n        runid = s0[\"sessions\"][0][\"runs\"][0]\n        in_bold = bold_nii(BIDS, sub, ses, runid)\n        env = os.environ.copy()\n        env[\"IN_BOLD\"] = in_bold\n        env[\"DENOISE_MPPCA\"] = \"1\" if cfg.get(\"options\", {}).get(\"denoise_mppca\", False) else \"0\"\n        Path(\"steps/spi05_mppca.sh\").chmod(0o755)\n        subprocess.run([\"bash\", \"steps/spi05_mppca.sh\"], check=True, env=env)\n        Path(output.mark).write_text(\"ok\\n\")\n", "rule": "mppca_smoke", "input": ["/mnt/ssd1/MyFirstStudy/derivatives/spineprep/logs/discover.json"], "log": [], "params": [], "shellcmd": null, "incomplete": false, "starttime": null, "endtime": 1759843352.7754478, "job_hash": 8737364266822, "conda_env": null, "software_stack_hash": "d41d8cd98f00b204e9800998ecf8427e", "container_img_url": null, "input_checksums": {"/mnt/ssd1/MyFirstStudy/derivatives/spineprep/logs/discover.json": "8d256e3d71e4f5dec3d7ac5fc5e3c3ffe431756bbaa4cd804678e34c46211ebf"}}
